<div class="container" style="margin-top: 35px;">
  

    <h1 class="display-4" style="text-align: center; font-weight:500;">EMPLEADOS</h1>
    <br> 

  <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#agregar">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path>
        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path>
      </svg>
    Agregar
</button>




  <!-- DataTales Example -->
  <div class="card shadow mb-4" style="margin-top: 35px;">
      <div class="card-header py-3">

        <div class="input-group mb-3">
            <span class="input-group-text" >
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                  </svg>
            </span>
            
            <input type="text" class="form-control" name="filtroEmp" placeholder="Buscar... (Nombres, Apellidos, Teléfono, Clave Usuario)" 
            [(ngModel)]="filtroEmp" aria-label="Username" aria-describedby="basic-addon1">
        </div>


      </div>



      
      
      <div class="card-body">
          <div class="table-responsive">
              <table class="table table-bordered text-center" id="dataTable" width="100%" cellspacing="0">
                  <thead>
                      <tr>
                            <th>Id</th>
                          <th>Nombre (s)</th>
                          <th>Apellido Paterno</th>
                          <th>Apellido Materno</th>
                          <th>Teléfono</th>
                          <th>Puesto</th>
                          <th>Id Sucursal</th>
                          <th>Clave Usuario</th>
                          <th>Contraseña</th>
                          <th>Activacion</th>
                          <th>Acciones</th>
                        </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let empleado of empleadosDetails | filtroEmpleado : filtroEmp">
                          <td>{{empleado.id_empleado}}</td>
                          <td>{{empleado.nombre}}</td>
                          <td>{{empleado.ape_p}}</td>
                          <td>{{empleado.ape_m}}</td>
                          <td>{{empleado.telefono}}</td>
                          <td>{{empleado.puesto}}</td>
                          <td>{{empleado.id_sucursal}}</td>
                          <td>{{empleado.clvUsuario}}</td>
                          <td>{{empleado.password_user}}</td>

                          <td *ngIf="empleado.cactivacion == true">Activado</td>
                          <td *ngIf="empleado.cactivacion == false">Desactivado</td>

                          <td>
                            
                                <!-- Botón Eliminar -->
                                <button class="btn btn-danger" data-bs-target="#eliminar" data-bs-toggle="modal" (click)="edit(empleado)"
                                         style="margin-right: 15px;"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                                        preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">

                                        
                                        <path fill="#fff"
                                            d="M10 5h4a2 2 0 1 0-4 0ZM8.5 5a3.5 3.5 0 1 1 7 0h5.75a.75.75 0 0 1 0 1.5h-1.32l-1.17 12.111A3.75 3.75 0 0 1 15.026 22H8.974a3.75 3.75 0 0 1-3.733-3.389L4.07 6.5H2.75a.75.75 0 0 1 0-1.5H8.5Zm2 4.75a.75.75 0 0 0-1.5 0v7.5a.75.75 0 0 0 1.5 0v-7.5ZM14.25 9a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5a.75.75 0 0 1 .75-.75Zm-7.516 9.467a2.25 2.25 0 0 0 2.24 2.033h6.052a2.25 2.25 0 0 0 2.24-2.033L18.424 6.5H5.576l1.158 11.967Z" />
                                    </svg></button>


                                <!-- Botón Editar -->
                                <button class="btn btn-success" data-bs-target="#editar" data-bs-toggle="modal" (click)="edit(empleado)"
                                    ><svg xmlns="http://www.w3.org/2000/svg" width="1em"
                                        height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48">
                                        <mask id="svgIDb">
                                            <g fill="none">
                                                <g stroke="#fff" stroke-linecap="round" stroke-linejoin="round"
                                                    stroke-width="4" clip-path="url(#svgIDa)">
                                                    <path
                                                        d="m31 8.999l8 8m-31 15L36 4l8 7.999l-28 28l-10 2l2-10Zm23-23l8 8m-30 15l7 7m-3-4l22-22" />
                                                </g>
                                                <defs>
                                                    <clipPath id="svgIDa">
                                                        <path fill="#000" d="M0 0h48v48H0z" />
                                                    </clipPath>
                                                </defs>
                                            </g>
                                        </mask>
                                        <path fill="#fff" d="M0 0h48v48H0z" mask="url(#svgIDb)" />
                                    </svg>
                                </button>



                            
                          </td>
                      </tr>
                  </tbody>
              </table>
          </div>
          

      </div>
  </div>

</div>





<!-- AGREGAR EMPLEADO -->

<div class="modal fade" id="agregar" #agregar tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
        <div class="modal-content">

            <!-- Header del Modal -->
            <div class="modal-header" style="background-color: #4F8BFF;">
                <!-- Título Modal -->
                <h4 class="modal-title" id="exampleModalLabel" style="color: white;">Agregar empleado</h4>
                <!-- Botón para cerrar Modal -->
                <button class="btn btn-outline-dark close" aria-label="close" type="button" data-bs-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <!-- Body del Modal -->
            <div class="modal-body">
                <form #addForm="ngForm" (ngSubmit)="addEmpleado(addForm)">
                    <div class="form-group">
                        <label for="id_empleado" class="form-label">Id_Empleado</label>
                        <input type="text"  #id_empleado (ngModel)="empleadosToUpdate.id_empleado"
                            name="id_empleado" class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" #nombre (ngModel)="empleadosToUpdate.nombre"  name="nombre"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="ape_p" class="form-label">Apellido paterno</label>
                        <input type="text" #ape_p (ngModel)="empleadosToUpdate.ape_p"  name="ape_p"
                            class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="ape_m" class="form-label">Apellido materno</label>
                        <input type="text" #ape_m (ngModel)="empleadosToUpdate.ape_m"  name="ape_m"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="number" required minlength="10" maxlength="13" #telefono (ngModel)="empleadosToUpdate.telefono"  name="telefono"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="puesto" class="form-label">Puesto</label>
                        <div>
                            <select class="form-select" #puesto name="puesto" (ngModel)="empleadosToUpdate.puesto" >
                                <option value="1" selected>1.- Gerente de sucursal</option>
                                <option value="2">2.- Vendedor</option>
                                <option value="3">3.- Almacenista</option>
                                <option value="4">4.- Cajeros</option>
                                <option value="5">5.- Gerente general</option>
                                <option value="6">6.- Administrador</option>
                                <option value="7">7.- Atencion a clientes</option>
                                <option value="8">8.- Gerente regional</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="id_sucursal" class="form-label">Id de Sucursal</label>

                        <div>
                            <select class="form-select" #id_sucursal name="id_sucursal" (ngModel)="empleadosToUpdate.id_sucursal">
                                <option *ngFor="let tienda of tiendasDetails" value="{{tienda.id_sucursal}}">{{tienda.id_sucursal}}.- {{tienda.direccion}}  {{tienda.estado}} ( {{tienda.clvSuc}} )</option>
                            </select>
                        </div>
                        
                    </div>



                    <div class="form-group">
                        <label for="clvUsuario" class="form-label">Clave de usuario</label>
                        <input type="text" #clvUsuario (ngModel)="empleadosToUpdate.clvUsuario" name="clvUsuario"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="password_user" class="form-label">Contraseña de usuario</label>
                        <input type="text" #password_user (ngModel)="empleadosToUpdate.password_user"  required minlength="8" name="password_user"
                            class="form-control">
                    </div>

                    

                    

                    <!-- Pie de Modal con botón -->
                    <div class="form-group">
                        <button #AgregarButtonEmpleado id="AgregarButtonEmpleado"   type="submit" style="margin-top: 10px;" 
                        class="btn btn-outline-primary" onClick="window.location.reload();">Agregar</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>




























<!--EDITAR MODAL -->
<div class="modal fade" id="editar" #editar tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
        <div class="modal-content">

            <!-- Header del Modal -->
            <div class="modal-header" style="background-color: #20A140;">
                <!-- Título Modal -->
                <h4 class="modal-title" id="exampleModalLabel" style="color: white;">Editar empleado</h4>
                <!-- Botón para cerrar Modal -->
                <button class="btn btn-outline-dark close" aria-label="close" type="button" data-bs-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <!-- Body del Modal -->
            <div class="modal-body">
                <form #updateForm="ngForm">
                    <div class="form-group">
                        <label for="id_empleado" class="form-label">Id_Empleado</label>
                        <input type="text"  #id_empleado_editar [(ngModel)]="empleadosToUpdate.id_empleado"
                            name="id_empleado_editar" class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" #nombre [(ngModel)]="empleadosToUpdate.nombre"  name="nombre"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="ape_p" class="form-label">Apellido paterno</label>
                        <input type="text" #ape_p [(ngModel)]="empleadosToUpdate.ape_p"  name="ape_p"
                            class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="ape_m" class="form-label">Apellido materno</label>
                        <input type="text" #ape_m [(ngModel)]="empleadosToUpdate.ape_m"  name="ape_m"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="number" required minlength="10" maxlength="13" #telefono [(ngModel)]="empleadosToUpdate.telefono"  name="telefono"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="puesto_edit" class="form-label">Puesto</label>
                        <div>
                            <select class="form-select" #puesto_edit name="puesto_edit" [(ngModel)]="empleadosToUpdate.puesto">
                                <option value="1" selected>1.- Gerente de sucursal</option>
                                <option value="2">2.- Vendedor</option>
                                <option value="3">3.- Almacenista</option>
                                <option value="4">4.- Cajeros</option>
                                <option value="5">5.- Gerente general</option>
                                <option value="6">6.- Administrador</option>
                                <option value="7">7.- Atencion a clientes</option>
                                <option value="8">8.- Gerente regional</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="id_sucursal_edit" class="form-label">Id de Sucursal</label>

                        <div>
                            <select class="form-select" #id_sucursal_edit name="id_sucursal_edit" [(ngModel)]="empleadosToUpdate.id_sucursal">
                                <option *ngFor="let tienda of tiendasDetails" value="{{tienda.id_sucursal}}">{{tienda.id_sucursal}}.- {{tienda.direccion}}  {{tienda.estado}} ( {{tienda.clvSuc}} )</option>
                            </select>
                        </div>
                        
                    </div>



                    <div class="form-group">
                        <label for="clvUsuario" class="form-label">Clave de usuario</label>
                        <input type="text" #clvUsuario [(ngModel)]="empleadosToUpdate.clvUsuario" name="clvUsuario"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="password_user" class="form-label">Contraseña de usuario</label>
                        <input type="text" #password_user [(ngModel)]="empleadosToUpdate.password_user"  required minlength="8" name="password_user"
                            class="form-control">
                    </div>
                    

                    <div class="form-group">
                        <label class="form-label">Activación</label>
                        <div>
                            <select class="form-select" #cactivacion_edit name="cactivacion_edit" [(ngModel)]="empleadosToUpdate.cactivacion" aria-label="Default select example">  
                                <option  value="true" selected>Si</option>  
                                <option value="false">No</option>  
                            </select>
                        </div>
                    </div>
                    

                    <!-- Pie de Modal con botón -->
                    <div class="form-group">
                        <button #AgregarButtonEmpleado_edit id="AgregarButtonEmpleado_Edit"  onClick="window.location.reload();"  (click)="updateEmpleado(id_empleado_editar.value)" type="submit" style="margin-top: 10px;" class="btn btn-outline-success">Editar</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!--EDITAR MODAL TERMINA-->






































<!--ELIMINAR MODAL -->
<div class="modal fade" id="eliminar" #eliminar tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
        <div class="modal-content">

            <!-- Header del Modal -->
            <div class="modal-header" style="background-color: #F55353;">
                <!-- Título Modal -->
                <h4 class="modal-title" id="exampleModalLabel" style="color: white;">Eliminar empleado</h4>
                <!-- Botón para cerrar Modal -->
                <button class="btn btn-outline-dark close" aria-label="close" type="button" data-bs-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <!-- Body del Modal -->
            <div class="modal-body">
                <form #updateForm="ngForm">
                    <div class="form-group">
                        <label for="id_empleado" class="form-label">Id_Empleado</label>
                        <input type="text"  #id_empleado_editar [(ngModel)]="empleadosToUpdate.id_empleado"
                            name="id_empleado_editar" class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" #nombre [(ngModel)]="empleadosToUpdate.nombre"  name="nombre"
                            class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="ape_p" class="form-label">Apellido paterno</label>
                        <input type="text" #ape_p [(ngModel)]="empleadosToUpdate.ape_p"  name="ape_p"
                            class="form-control" disabled>
                    </div>
                    
                    <div class="form-group">
                        <label for="ape_m" class="form-label">Apellido materno</label>
                        <input type="text" #ape_m [(ngModel)]="empleadosToUpdate.ape_m"  name="ape_m"
                            class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="number" required minlength="10" maxlength="13" #telefono [(ngModel)]="empleadosToUpdate.telefono"  name="telefono"
                            class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="puesto_edit" class="form-label">Puesto</label>
                        <div>
                            <input class="form-control" #puesto_edit name="puesto_edit" [(ngModel)]="empleadosToUpdate.puesto" disabled>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="id_sucursal_edit" class="form-label">Id de Sucursal</label>

                        <div>
                            <input class="form-control" type="text" #id_sucursal_edit name="id_sucursal_edit" [(ngModel)]="empleadosToUpdate.id_sucursal" disabled>
                        </div>
                        
                    </div>



                    <div class="form-group">
                        <label for="clvUsuario_delete" class="form-label">Clave de usuario</label>
                        <input type="text" #clvUsuario_delete [(ngModel)]="empleadosToUpdate.clvUsuario" name="clvUsuario_delete"
                            class="form-control" disabled>
                    </div>

                    <div class="form-group">
                        <label for="password_user" class="form-label">Contraseña de usuario</label>
                        <input type="text" #password_user [(ngModel)]="empleadosToUpdate.password_user"  required minlength="8" name="password_user"
                            class="form-control" disabled>
                    </div>
                    


                    <!-- Pie de Modal con botón -->
                    <div class="form-group">
                        <button #AgregarButtonEmpleado_edit id="AgregarButtonEmpleado_Edit"  onClick="window.location.reload();"  (click)="eliminarEmpleado(clvUsuario_delete.value)" type="submit" style="margin-top: 10px;" class="btn btn-outline-danger">Confirmar eliminación de empleado</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!--ELIMINAR MODAL TERMINA-->